@{ Layout = "~/Views/Shared/_LayoutLogado.cshtml"; }
@model int
<link href="@Url.Content("~/Content/rpa.css?v=" + TGV.IPEFAE.Web.App.Controllers.BaseController.VersionNumber)" rel="stylesheet" type="text/css">
<link rel="stylesheet" href="@Url.Content("~/Content/Concurso.css?v=" + TGV.IPEFAE.Web.App.Controllers.BaseController.VersionNumber)">
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.22/pdfmake.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
<script src="@Url.Content("~/Scripts/Views/Concurso.js?v=" + TGV.IPEFAE.Web.App.Controllers.BaseController.VersionNumber)"></script>
<script>
    var idConcurso = '@Model';
</script>
<div class="container marginBottom-30 rpa-container" ng-controller="pdfController">
    <div ng-show="colaboradores.length > 0">
        <div class="row">
            <button class="btn btn-default" onclick="window.location.href='@Url.Content("~/Admin/Concurso")'">Voltar</button>
            <button class="btn btn-primary" ng-click="export()">Gerar PDF</button>
        </div>
        <div id="exportthis">
            <div class="" ng-repeat="colaborador in colaboradores">
                <div class="rpa col-md-10" ng-repeat="i in [1,2]">
                    <h1>RPA – RECIBO DE PAGAMENTO A AUTÔNOMO</h1>
                    <div class="row">
                        <h2>DADOS DO EMITENTE</h2>
                        <div class="row">
                            <div class="col-md-10">Razão Social:</div>
                            <div class="col-md-2 text-right">{{i}}ª Via</div>
                        </div>
                        <div class="row">
                            <div class="col-md-8">CNPJ:</div>
                            <div class="col-md-4">Recibo Nº ou Mês/Ano:</div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">Endereço:</div>
                            <div class="col-md-4">Bairro:</div>
                            <div class="col-md-4">Cidade:</div>
                        </div>
                    </div>
                    <hr class="col-md-12" />
                    <div class="row">
                        <h2>DADOS DO PRESTADOR DE SERVIÇOS</h2>
                        <div class="row">
                            <div class="col-md-12">Nome: <b>{{colaborador.nome}}</b></div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">Nº do CPF: <b>{{colaborador.cpf_formatado}}</b></div>
                            <div class="col-md-4">Nº do RG: <b>{{colaborador.rg}}</b></div>
                            <div class="col-md-4">Nº do NIT/PIS: <b>{{colaborador.pis_pasep_net}}</b></div>
                        </div>
                        <div class="row">
                            <div class="col-md-4">Endereço: <b>{{colaborador.endereco_logradouro}} - {{colaborador.endereco_nro}}</b></div>
                            <div class="col-md-4">Bairro: <b>{{colaborador.endereco_bairro}}</b></div>
                            <div class="col-md-4">Cidade: <b>{{colaborador.endereco_cidade_uf_nome}}</b></div>
                        </div>
                    </div>
                    <hr class="col-md-12" />
                    <div class="prestacao-servico row">
                        <h2>PRESTAÇÃO DE SERVIÇO</h2>
                        <div class="row">
                            <div class="col-md-12">Descrição dos Serviços Prestados: <b>{{colaborador.funcao_nome}}</b></div>
                            <div class="col-md-12">Valor dos Serviços Prestados: <b>{{colaborador.valor}}</b></div>
                        </div>
                        <hr class="col-md-12" />
                        <div class="row">
                            <div class="col-md-4 imposto">
                                <h4>INSS</h4>
                                <div class="col-md-12">Base Cálculo: <b>{{colaborador.valor}}</b></div>
                                <div class="col-md-12">Alíquota: <b>{{colaborador.aliquota_inss}} %</b></div>
                                <div class="col-md-12">Valor a Recolher: <b>{{colaborador.valor_inss}}</b></div>
                            </div>
                            <div class="col-md-4 imposto">
                                <h4>IRPF</h4>
                                <div class="col-md-12">Base Cálculo: <b>{{colaborador.valor}}</b></div>
                                <div class="col-md-12">Alíquota: <b>{{colaborador.aliquota_irpf}} %</b></div>
                                <div class="col-md-12">Dedução: <b>{{colaborador.deducao_irpf}} %</b></div>
                                <div class="col-md-12">Valor a Recolher: <b>{{colaborador.valor_irfp}}</b></div>
                            </div>
                            <div class="col-md-4 imposto">
                                <h4>ISS</h4>
                                <div class="col-md-12">Base Cálculo: <b>{{colaborador.valor}}</b></div>
                                <div class="col-md-12">Alíquota: <b>{{colaborador.aliquota_iss}} %</b></div>
                                <div class="col-md-12">Valor a Recolher: <b>{{colaborador.valor_iss}}</b></div>
                            </div>
                        </div>
                    </div>
                    <hr class="col-md-12" />
                    <div class="row">
                        <h2>A RECEBER</h2>
                        <div>
                            <div class="col-md-4">Base de Cálculo: <b>{{colaborador.valor}}</b></div>
                            <div class="col-md-4">INSS Retido: <b>{{colaborador.valor_inss}}</b></div>
                            <div class="col-md-4">IRPF Retido: <b>{{colaborador.valor_irfp}}</b></div>
                            
                            <div class="col-md-4">ISS Retido: <b>{{colaborador.valor_iss}}</b></div>
                            <div class="col-md-8">Valor Líquido a Receber: <b>{{colaborador.valor_final}}</b></div>
                        </div>
                    </div>
                    <hr class="col-md-12" />
                    <div class="row">
                        <h2>RECIBO</h2>
                        <div>
                            <div class="col-md-12 recibo">Recebi do ente acima identificado pela prestação dos serviços a importância de: {{colaborador.valor_final}} ({{colaborador.valor_final_por_extenso}})</div>
                            <div>
                                <div class="col-md-6">Local: São João da Boa Vista</div>
                                <div class="col-md-6">Data: {{colaborador.data_hoje_formatado}}</div>
                            </div>
                            <div class="col-md-12 assinatura">Assinatura:</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="vazio" ng-show="colaboradores.length <= 0">
        Nenhum colaborador foi encontrado para este concurso
    </div>
</div>

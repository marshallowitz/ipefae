function abrirJanelaPopUpConcurso(a, o, e, t, n) { 1 == t ? gerarBoletoBancario(a, e, !0) : 2 == t ? gerarComprovanteInscricao(o, e) : 3 == t ? obterClassificacao(o, e) : 4 == t && obterStatusPagamento(o, e), $(n).modal("hide") } function abrirModalAdicionarEmpresa() { window.location.href = homePage + "Admin/Concurso/Index_Empresa/" } function abrirModalAnexo(a, o, e) { var t = homePage + "Admin/Concurso/AdicionarAnexo"; return $.ajax({ type: "POST", url: t, data: { idAnexo: a, idConcurso: o, idTipo: e }, success: function (a) { return $("section#modal-anexos").hasClass("in") ? !1 : ($("section#modal-anexos").html(""), $("section#modal-anexos").html(a.View), void $(".modal-anexos").modal("show")) }, error: function (a) { alertaErroJS({ NomeFuncao: "abrirModalAnexo()", ResponseText: a.responseText }) } }), !1 } function abrirModalBuscaInscrito(a, o) { var e = homePage + "Concurso/AbrirModalBuscaInscrito"; return $.ajax({ type: "POST", url: e, data: { idTipo: o }, success: function (e) { $("section#modal-boleto").html(""), $("section#modal-boleto").html(e.View), iniciarTelaModalBuscaInscrito(o), $("#hdnIdConcursoCPF").val(a); var t = obterSufixoTipoModal(o); $(".modal-" + t).modal("show") }, error: function (a) { alertaErroJS({ NomeFuncao: "abrirModalBuscaInscrito()", ResponseText: a.responseText }) } }), !1 } function abrirModalCargo(a, o) { var e = homePage + "Admin/Concurso/AdicionarCargo"; $.ajax({ type: "POST", url: e, data: { idCargo: a, idConcurso: o }, success: function (a) { $("section#modal-cargos").html(""), $("section#modal-cargos").html(a.View), $(".modal-cargos").modal("show") }, error: function (a) { alertaErroJS({ NomeFuncao: "abrirModalCargo()", ResponseText: a.responseText }) } }) } function abrirModalEstatisticas() { var a = homePage + "Admin/Concurso/AbrirModalEstatisticas"; return $.ajax({ type: "POST", url: a, success: function (a) { $("html, body").animate({ scrollTop: 0 }, "slow"), $("section#modal-estatisticas").html(""), $("section#modal-estatisticas").html(a.View), iniciarTelaModalEstatisticas(), $(".modal-estatisticas").modal("show") }, error: function (a) { alertaErroJS({ NomeFuncao: "abrirModalEstatisticas()", ResponseText: a.responseText }) } }), !1 } function abrirModalRemessas() { $("#txtUploadFile").val(""), $(".modal-remessa").modal("show") } function abrirModalUpdateConcurso() { $("#txtUploadFileConcurso").val(""), $(".modal-concurso").modal("show") } function abrirPagina(a) { window.location.href = homePage + a } function boletoInscrito(a, o) { abrirJanelaPopUpWait(mensagemGerandoBoleto), gerarBoletoBancario(a, o, !0) } function buscarInscritoPorCPF_Ajax(a, o, e, t, n) { var r = obterLabelBotaoTipoModal(t), i = obterSufixoTipoModal(t), s = ".modal-" + i, c = homePage + "Concurso/BuscarInscritoPorCPF"; return o = removerTodosCaracteresMenosNumeros(o), 4 != t && abrirJanelaPopUpWait(n), $.ajax({ type: "POST", url: c, data: { idConcurso: a, cpf: o, idMatricula: e, idTipo: t }, async: !1, success: function (e) { if (!e.Sucesso) return $(s).find(".resultado-status").length > 0 && $(s).find(".resultado-status").hide(), $(s).find("#txtCPF").val(""), $(s).find(".cpf-nao-encontrado").fadeIn(1e3).fadeOut(3e3), $(s).find("#txtCPF").focus(), null != janelaPopUp && (janelaPopUp.close(), janelaPopUp = null), void $.unblockUI(); if (e.MaisUmCargo) { var n = 2 >= t ? ".cpf-segunda-via-" + i : ".cpf-" + i; return void exibirListaCargos(t, a, o, "buscarInscritoPorCPFComCargo", s, n, r, !0) } return 4 == t ? ($(s).find("#btnGerar").hide(), $(s + "-white").find("#txtCPF").attr("readonly", "readonly"), $(s).find(".resultado-status > .status_dados").html(e.DadosStatusPagamento), $(s).find(".resultado-status > .status").html(e.StatusPagamento), $(s).find(".resultado-status").show(), void $.unblockUI()) : ($.unblockUI(), void abrirJanelaPopUpConcurso(a, e.NomeConcurso, e.IdInscrito, t, s)) }, error: function (a) { alertaErroJS({ NomeFuncao: "buscarInscritoPorCPF()", ResponseText: a.responseText }), $.unblockUI() } }), !1 } function buscarInscritoPorCPF(a, o, e, t) { var n = obterMensagemTipoModal(t); $.blockUI({ message: n, css: cssCarregando }), setTimeout(function () { buscarInscritoPorCPF_Ajax(a, o, e, t, n) }, 500) } function buscarInscritoPorCPFComCargo(a, o, e) { var t = obterSufixoTipoModal(e), n = ".modal-" + t, r = obterMensagemTipoModal(e), i = $("input[name=cargo-inscrito]:checked").val(); return "" === i || void 0 === i ? void alert(mensagemSelecioneUmaMatricula) : (abrirJanelaPopUpWait(r), void abrirJanelaPopUpConcurso(a, o, i, e, n)) } function carregarAlertaRecurso(a) { var o = homePage + "Admin/Concurso/CarregarAlertaRecurso"; $.ajax({ type: "POST", url: o, data: { idConcurso: a }, success: function (a) { $(".alertaRecurso").html(""), $(".alertaRecurso").html(a.View) }, error: function (a) { alertaErroJS({ NomeFuncao: "carregarAlertaRecurso()", ResponseText: a.responseText }) } }) } function carregarEmpresas(a, o) { var e = homePage + "Admin/Concurso/CarregarEmpresas"; $.ajax({ type: "POST", url: e, success: function (e) { a.empty(); var t = e.data ? e.data : e; t.length > 0 && (a.addItems({ data: t, valueName: "Value", textName: "Text" }), "0" == o ? a[0].selectedIndex = 0 : a.val(o)) }, error: function (a) { alertaErroJS({ NomeFuncao: "carregarEmpresas()", ResponseText: a.responseText }), $.unblockUI() } }) } function definirOrdenacao(a, o) { o.hasClass("selecionado") || (o.hasClass("nome") ? $(".matricula").removeClass("selecionado").addClass("order") : $(".nome").removeClass("selecionado").addClass("order"), o.addClass("selecionado").removeClass("order"), maisInscritos(a, !0)) } function downloadCSV(a) { $.blockUI({ message: mensagemDownloadCSV, css: cssCarregando }), $("#iframeCSV").attr("src", homePage + "Handlers/DownloadCSVHandler.ashx?id=" + a), setTimeout(function () { $.unblockUI() }, 1e4) } function downloadTXT(a) { $.blockUI({ message: mensagemDownloadTXT, css: cssCarregando }), $("#iframeTXT").attr("src", homePage + "Handlers/DownloadTXTHandler.ashx?id=" + a + "&tipo=rem"), setTimeout(function () { $.unblockUI() }, 1e4) } function editar(a) { window.location.href = homePage + "Admin/Concurso/Cadastro/" + a } function editarAtivacao(a, o) { $.blockUI({ message: mensagemDesativando, css: cssCarregando }); var e = homePage + "Admin/Concurso/AtivarCargo"; $.ajax({ type: "POST", url: e, data: { idCargo: a, idConcurso: o }, success: function () { alert(operacaoMensagemSucesso), recarregarTabelaCargos(o), $.unblockUI() }, error: function (a) { alertaErroJS({ NomeFuncao: "editarAtivacao()", ResponseText: a.responseText }), $.unblockUI() } }) } function editarInscrito(a) { window.location.href = homePage + "Admin/Concurso/Cadastro_Inscrito/" + a } function excluirAnexo(a, o, e) { var t = homePage + "Admin/Concurso/ExcluirAnexo"; $.ajax({ type: "POST", url: t, data: { idAnexo: a, idConcurso: o, idTipo: e }, success: function () { alert(mensagemArquivoRemovidoSucesso), recarregarTabelaAnexos(o, e) }, error: function (a) { alertaErroJS({ NomeFuncao: "excluirAnexo()", ResponseText: a.responseText }) } }) } function excluirCargo(a, o) { var e = homePage + "Admin/Concurso/ExcluirCargo"; $.ajax({ type: "POST", url: e, data: { idCargo: a, idConcurso: o }, success: function () { alert(mensagemCargoRemovidoSucesso), recarregarTabelaCargos(o) }, error: function (a) { alertaErroJS({ NomeFuncao: "excluirCargo()", ResponseText: a.responseText }) } }) } function exibirListaCargos(a, o, e, t, n, r, i, s) { var c = homePage + "Concurso/ExibirModalListaCargos"; $.ajax({ type: "POST", url: c, data: { idTipo: a, idConcurso: o, cpf: e }, success: function (a) { if ($(n).find(r).html(""), $(n).find(r).html(a.View), $(n).find(".modal-dialog").animate({ width: 800 }, 500), $(n).find(n + "-white").animate({ height: 300 }, 500), $(n).find(".primeira-coluna").show(), $(n).find(".segunda-coluna").removeClass("col-md-12").addClass("col-md-6"), $(n).find(".linha-cargos").show(), $(n).find(r).find("#btnOkComCargo").val(i), $(n + "-white").find("#txtCPF").attr("readonly", "readonly"), $(n + "-white").find("#btnGerar").hide(), $(n + "-white").find("#btnGerar2").show(), r.indexOf("status-pagamento") >= 0 && ($(n).find(r).find(".statusPagamento").show(), $(n).find(r).find(".selecao").hide()), null != janelaPopUp) janelaPopUp.close(), janelaPopUp = null; else { var e = $(".cd-tabs-content").height(), c = $(n).height(); tabsContentResize(e - c), $.unblockUI() } if (s) return $(n).find(r).find("#btnOkComCargo").hide(), void $.unblockUI(); var l = window[t]; "function" == typeof l && $(n).find("#btnOkComCargo").on("click", function () { l(o) }), tabsContentResize(65), $.unblockUI() }, error: function (a) { alertaErroJS({ NomeFuncao: "exibirListaCargos()", ResponseText: a.responseText }), $.unblockUI() } }) } function incluirAnexo(a) { var o = homePage + "Admin/Concurso/SalvarAnexo", e = $("#hdnIdAnexo").val(), t = $("#hdnIdTipo").val(), n = $("#txtNomeArquivo").val(), r = $("#txtDataPublicacao").val(), i = $("#rdRecSim").is(":checked"), s = $("#txtDataInicioRecurso").val(), c = $("#txtDataFimRecurso").val(), l = $("#txtUploadFile").val(); $.ajax({ type: "POST", url: o, data: { idAnexo: e, idConcurso: a, idTipo: t, nomeArquivo: n, dataPublicacao: r, temRecurso: i, recInicio: s, recFim: c, fileName: l }, success: function () { alert(arquivoAnexadoSucesso), carregarAlertaRecurso(a), recarregarTabelaAnexos(a, t), $(".modal-anexos").modal("hide") }, error: function (a) { alertaErroJS({ NomeFuncao: "incluirAnexo()", ResponseText: a.responseText }) } }) } function incluirCargo(a) { var o = homePage + "Admin/Concurso/SalvarCargo", e = $("#hdnIdCargo").val(), t = $("#txtNomeCargo").val(), n = $("#rdIseSim").is(":checked"), r = $("#txtValorInscricao").val(); $.ajax({ type: "POST", url: o, data: { idCargo: e, idConcurso: a, nomeCargo: t, ehIsento: n, valorInscricao: r }, success: function () { alert(mensagemOperacaoSucesso), recarregarTabelaCargos(a), $(".modal-cargos").modal("hide") }, error: function (a) { alertaErroJS({ NomeFuncao: "incluirCargo()", ResponseText: a.responseText }) } }) } function iniciarTelaListaConcursos() { $("#txtUploadFile").on("change", function (a) { uploadFileRemessa(a) }), $("#btnSalvar").on("click", function () { realizarUploadArquivoRemessa() }), $("#txtUploadFileConcurso").on("change", function (a) { uploadFileConcurso(a) }), $("#btnSalvarConcurso").on("click", function () { realizarUploadArquivoConcurso() }), listarConcursos() } function iniciarTelaListaConcursosUsuario() { isMobile && (textoAbaAbertas = textoAbaAbertasMini), listarConcursosUsuario(), tabsContentResize(65), $(window).resize(function () { tabsContentResize(65) }) } function iniciarTelaDadosConcursosUsuario(a, o) { listarDadosConcursosUsuario(a), tabsContentResize(65), $(window).resize(function () { tabsContentResize(65) }), o ? ($(".recursos").removeClass("disabled"), $(".recursos").next().removeClass("disabled")) : ($(".recursos").addClass("disabled"), $(".recursos").next().addClass("disabled")) } function iniciarTelaListaInscritos(a) { $("#txtMatricula").mask("999999"), $("#txtCPF").mask("999.999.999-99"), $("#txtMatricula").focus(), $("#btnPesquisar").on("click", function () { pesquisarInscritos(a) }), $(".order").on("click", function () { definirOrdenacao(a, $(this)) }) } function iniciarTelaListaPublicacoes() { if (inscricoesOnline) { var a = new Date, o = obterData($("#hdnDataInscricao").val()), e = obterData($("#hdnDataFimInscricao").val()), t = obterData($("#hdnDataBoleto").val()), n = obterData($("#hdnDataInicioComprovante").val()), r = obterData($("#hdnDataFimComprovante").val()), i = obterData($("#hdnDataInicioClassificacao").val()), s = obterData($("#hdnDataInicioIsencao").val()), c = obterData($("#hdnDataFimIsencao").val()), l = e.addDays(10), d = $("#hdnIdConcurso").val(); 0 >= o - a && 0 >= a - e && $("#btnInscricao").show(), 0 >= o - a && 0 >= a - t && ($("#btnBoleto").parent().show(), $("#btnBoleto").on("click", function () { abrirModalBuscaInscrito(d, 1) })), 0 >= o - a && 0 >= a - l && ($("#btnPagamentoOk").parent().show(), $("#btnPagamentoOk").on("click", function () { abrirModalBuscaInscrito(d, 4) })), 0 >= s - a && 0 >= a - c && ($("#btnIsencao").parent().show(), $("#btnIsencao").on("click", function () { $('a[data-content="recursos"]').trigger("click") })), 0 >= n - a && 0 >= a - r && ($("#btnComprovante").parent().show(), $("#btnComprovante").on("click", function () { abrirModalBuscaInscrito(d, 2) })), 0 >= i - a && ($("#btnClassificacao").parent().show(), $("#btnClassificacao").on("click", function () { abrirModalBuscaInscrito(d, 3) })), $("#btnInscricao").on("click", function () { window.location.href = homePage + "Concurso/" + d + "/Inscricao" }) } } function iniciarTelaCadastroConcurso(a, o, e, t, n, r) { $("#txtDataInicio").mask("00/00/0000 00:00"), $("#datetimepickerInicio").datetimepicker({ locale: "pt-br" }), $("#txtDataEncerramentoInscricoes").mask("00/00/0000 00:00"), $("#datetimepickerEncerramentoInscricoes").datetimepicker({ locale: "pt-br" }), $("#txtDataEncerramento").mask("00/00/0000 00:00"), $("#datetimepickerEncerramento").datetimepicker({ locale: "pt-br" }), $("#txtDataInicioComprovante").mask("00/00/0000 00:00"), $("#datetimepickerInicioComprovante").datetimepicker({ locale: "pt-br" }), $("#txtDataEncerramentoComprovante").mask("00/00/0000 00:00"), $("#datetimepickerEncerramentoComprovante").datetimepicker({ locale: "pt-br" }), $("#txtDataInicioClassificacao").mask("00/00/0000 00:00"), $("#datetimepickerInicioClassificacao").datetimepicker({ locale: "pt-br" }), $("#txtDataInicioIsento").mask("00/00/0000 00:00"), $("#datetimepickerInicioIsento").datetimepicker({ locale: "pt-br" }), $("#txtDataEncerramentoIsento").mask("00/00/0000 00:00"), $("#datetimepickerEncerramentoIsento").datetimepicker({ locale: "pt-br" }), $("#txtDataBoleto").mask("00/00/0000 00:00"), $("#datetimepickerBoleto").datetimepicker({ locale: "pt-br" }), carregarEmpresas($("#ddlEmpresa"), e), $("#hdnId").val() <= 0 && ($("#txtDataEncerramentoInscricoes").val(""), $("#txtDataInicioComprovante").val(""), $("#txtDataEncerramentoComprovante").val(""), $("#txtDataInicioClassificacao").val(""), $("#txtDataInicioIsento").val(""), $("#txtDataEncerramentoIsento").val(""), $("#txtDataBoleto").val("")), $("#datetimepickerInicio").on("dp.change", function (a) { $("#datetimepickerEncerramentoInscricoes").data("DateTimePicker").minDate(a.date) }), $("#ddlTipoLayout").val(o), $(".incluirAnexo").on("click", function () { abrirModalAnexo(0, a, $(this).attr("tag")) }), $(".incluirCargo").on("click", function () { abrirModalCargo(0, a) }), $('input[name="encerrado"]').on("change", function () { $("#rdEncSim").is(":checked") ? $("#txtDataEncerramento").parent().parent().show() : ($("#txtDataEncerramento").parent().parent().hide(), $("#txtDataEncerramento").val("")) }), t ? $("#rdIOSim").attr("checked", "checked") : $("#rdIONao").attr("checked", "checked"), n ? ($("#rdEncSim").attr("checked", "checked"), $("#txtDataEncerramento").parent().parent().show()) : $("#rdEncNao").attr("checked", "checked"), r ? $("#rdAtivoSim").attr("checked", "checked") : $("#rdAtivoNao").attr("checked", "checked"), carregarAlertaRecurso(a), recarregarTabelaAnexos(a, 1), recarregarTabelaAnexos(a, 2), recarregarTabelaCargos(a), $(".concursoForm").on("init.field.bv", function (a, o) { removerIconeValidator(a, o) }).bootstrapValidator({ container: "tooltip", feedbackIcons: { valid: "glyphicon glyphicon-ok", invalid: "glyphicon glyphicon-remove", validating: "glyphicon glyphicon-refresh" }, fields: { nome: { validators: { notEmpty: { message: identificacaoObrigatoria } } }, dataInicio: { validators: { notEmpty: { message: dataInicioObrigatorio }, date: { message: dataInicioFormatoInvalido, format: "DD/MM/YYYY HH:mm", min: "01/01/2015 00:00", max: "01/01/2025 00:00" } } }, dataEncerramentoInscricoes: { validators: { notEmpty: { message: dataEncerramentoInscricoesObrigatorio }, date: { message: dataEncerramentoInscricoesFormatoInvalido, format: "DD/MM/YYYY HH:mm", min: "01/01/2015 00:00", max: "01/01/2025 00:00" } } }, dataInicioComprovante: { validators: { notEmpty: { message: dataInicioComprovanteObrigatorio }, date: { message: dataInicioComprovanteFormatoInvalido, format: "DD/MM/YYYY HH:mm", min: "01/01/2015 00:00", max: "01/01/2025 00:00" } } }, dataEncerramentoComprovante: { validators: { notEmpty: { message: dataEncerramentoComprovanteObrigatorio }, date: { message: dataEncerramentoComprovanteFormatoInvalido, format: "DD/MM/YYYY HH:mm", min: "01/01/2015 00:00", max: "01/01/2025 00:00" } } }, dataInicioClassificacao: { validators: { notEmpty: { message: dataInicioClassificacaoObrigatorio }, date: { message: dataInicioClassificacaoFormatoInvalido, format: "DD/MM/YYYY HH:mm", min: "01/01/2015 00:00", max: "01/01/2025 00:00" } } }, dataInicioIsento: { validators: { notEmpty: { message: dataInicioIsentoObrigatorio }, date: { message: dataInicioIsentoFormatoInvalido, format: "DD/MM/YYYY HH:mm", min: "01/01/2015 00:00", max: "01/01/2025 00:00" } } }, dataEncerramentoIsento: { validators: { notEmpty: { message: dataEncerramentoIsentoObrigatorio }, date: { message: dataEncerramentoIsentoFormatoInvalido, format: "DD/MM/YYYY HH:mm", min: "01/01/2015 00:00", max: "01/01/2025 00:00" } } }, dataEncerramento: { validators: { notEmpty: { message: dataEncerramentoObrigatorio }, date: { message: dataEncerramentoFormatoInvalido, format: "DD/MM/YYYY HH:mm", min: "01/01/2015 00:00", max: "01/01/2025 00:00" } } }, dataBoleto: { validators: { notEmpty: { message: dataBoletoObrigatorio }, date: { message: dataBoletoFormatoInvalido, format: "DD/MM/YYYY HH:mm", min: "01/01/2015 00:00", max: "01/01/2025 00:00" } } } } }).on("success.form.bv", function (a) { a.preventDefault(), salvar() }), $("section#modal-anexos").on("shown.bs.modal", function () { $("#txtNomeArquivo").focus() }), $("section#modal-cargos").on("shown.bs.modal", function () { $("#txtNomeCargo").focus() }), $("#txtNome").focus() } function iniciarTelaModalAnexos(a, o) { $("#txtDataPublicacao").mask("00/00/0000 00:00"), $("#datetimepickerPublicacao").datetimepicker({ locale: "pt-br" }), $("#txtDataInicioRecurso").mask("00/00/0000 00:00"), $("#datetimepickerInicioRecurso").datetimepicker({ locale: "pt-br" }), $("#txtDataFimRecurso").mask("00/00/0000 00:00"), $("#datetimepickerFimRecurso").datetimepicker({ locale: "pt-br" }), $("#datetimepickerInicioRecurso").on("dp.change", function (a) { $("#datetimepickerFimRecurso").data("DateTimePicker").minDate(a.date) }), $("#txtUploadFile").on("change", function (o) { uploadFileAnexos(o, a) }), $('input[name="temRecurso"]').on("change", function () { $(".data_recurso").hide(), $(".data_recurso").find('input[type="text"]').val(""), "rdRecSim" == $(this).attr("id") && ($(".data_recurso").show(), $("#txtDataInicioRecurso").val($("#txtDataPublicacao").val()), $("#datetimepickerFimRecurso").data("DateTimePicker").minDate($("#txtDataPublicacao").val()), $("#txtDataInicioRecurso").focus()) }), $(".anexoForm").on("init.field.bv", function (a, o) { removerIconeValidator(a, o) }).bootstrapValidator({ container: "tooltip", feedbackIcons: { valid: "glyphicon glyphicon-ok", invalid: "glyphicon glyphicon-remove", validating: "glyphicon glyphicon-refresh" }, fields: { dataPublicacao: { validators: { notEmpty: { message: dataPublicacaoObrigatorio }, date: { message: dataPublicacaoFormatoInvalido, format: "DD/MM/YYYY H:m", min: "01/01/1920 00:00", max: "01/01/2025 00:00" } } }, nomeArquivo: { validators: { notEmpty: { message: nomeArquivoObrigatorio } } }, dataInicio: { validators: { notEmpty: { message: dataInicioObrigatorio }, date: { message: dataInicioFormatoInvalido, format: "DD/MM/YYYY H:m", min: "01/01/1920 00:00", max: "01/01/2025 00:00" } } }, dataTermino: { validators: { notEmpty: { message: dataTerminoObrigatorio }, date: { message: dataTerminoFormatoInvalido, format: "DD/MM/YYYY H:m", min: "dataInicio", max: "01/01/2025 00:00" } } }, UploadFile: { validators: { notEmpty: { message: arquivoObrigatorio }, file: { extension: "pdf,doc,docx", type: "application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document", maxSize: 4194304, message: arquivoFormatoInvalido } } } } }).on("success.form.bv", function (o) { o.preventDefault(), incluirAnexo(a) }), $("#rdRecSim").prop("checked", o), $("#rdRecNao").prop("checked", !o), $("#rdRecSim").is(":checked") ? $(".data_recurso").show() : $(".data_recurso").hide(), $('i[data-bv-icon-for="UploadFile"]').css("top", "25px"), $("#ddlTipoArquivo").on("change", function () { $("#hdnIdTipo").val($(this).val()) }) } function iniciarTelaModalBuscaInscrito(a, o) { var e = obterSufixoTipoModal(a); $(".modal-" + e).on("hidden.bs.modal", function () { $(".modal-" + e).find("#txtCPF").val("") }), $(".modal-" + e).on("show.bs.modal", function () { $(".modal-" + e).find("#txtCPF").mask("999.999.999-99") }), $(".modal-" + e).on("shown.bs.modal", function () { $(".modal-" + e).find(".cpfForm").on("init.field.bv", function (a, o) { removerIconeValidator(a, o) }).bootstrapValidator({ container: "tooltip", feedbackIcons: { valid: "glyphicon glyphicon-ok", invalid: "glyphicon glyphicon-remove", validating: "glyphicon glyphicon-refresh" }, fields: { cpf: { validators: { notEmpty: { message: cpfObrigatorio } } } } }).on("success.form.bv", function (o) { o.preventDefault(), buscarInscritoPorCPF($("#hdnIdConcursoCPF").val(), $(".modal-" + e).find("#txtCPF").val(), 0, a) }), $(".modal-" + e + "-white").find("#btnGerar2").on("click", function () { buscarInscritoPorCPFComCargo($("#hdnIdConcursoCPF").val(), o, a) }), $(".modal-" + e).find("#txtCPF").focus() }) } function iniciarTelaModalCargos(a) { $("#txtValorInscricao").maskMoney(), $(".cargoForm").on("init.field.bv", function (a, o) { removerIconeValidator(a, o) }).bootstrapValidator({ container: "tooltip", feedbackIcons: { valid: "glyphicon glyphicon-ok", invalid: "glyphicon glyphicon-remove", validating: "glyphicon glyphicon-refresh" }, fields: { nomeCargo: { validators: { notEmpty: { message: nomeObrigatorio } } }, valorInscricao: { validators: { callback: { message: valorInscricaoObrigatorio, callback: function (a) { return "" != a && "R$ 0,00" != a } } } } } }).on("success.form.bv", function (o) { o.preventDefault(), incluirCargo(a) }) } function iniciarTelaModalEstatisticas() { $("section#modal-estatisticas").on("shown.bs.modal", function () { $("section#modal-estatisticas").find("#txtEmail").focus() }), $("section#modal-estatisticas").on("hidden.bs.modal", function () { $("section#modal-estatisticas").find("#txtEmail").val(""), $("section#modal-estatisticas").find("#txtSenha").val("") }) } function liberarOpcaoRecursoComCargo(a) { var o = $(".recursos").find("input[name=cargo-inscrito]:checked").val(); return "" === o || void 0 === o ? void alert(mensagemSelecioneUmaMatricula) : void liberarOpcaoRecurso(a, o) } function liberarOpcaoRecurso(a, o) { var e = "Carregando ..."; $.blockUI({ message: e, css: cssCarregando }), void 0 === o && (o = 0); var t = homePage + "Concurso/LiberarOpcaoRecurso", n = removerTodosCaracteresMenosNumeros($(".cpf-requerente").find("#txtCPF").val()); $.ajax({ type: "POST", url: t, data: { idConcurso: a, cpf: n, idMatricula: o }, success: function (o) { return o.Sucesso ? o.MaisUmCargo ? (exibirListaCargos(0, a, n, "liberarOpcaoRecursoComCargo", ".recurso-cadastro-usuario", ".cpf-requerente-cargos", labelAbrirRecurso, !1), void $(".cpf-requerente-cargos").find("#txtCPF").attr("readonly", "readonly")) : (iniciarFormularioRecurso({ idConcurso: a, idInscrito: o.IdInscrito, inscricaoRequerente: o.InscricaoRequerente, nomeRequerente: o.NomeRequerente, cargoRequerente: o.CargoRequerente }), void $.unblockUI()) : ($(".cpf-nao-encontrado").fadeIn(1e3).fadeOut(3e3), void $.unblockUI()) }, error: function (a) { alertaErroJS({ NomeFuncao: "liberarOpcaoRecurso()", ResponseText: a.responseText }), $.unblockUI() } }) } function listarConcursos() { $.blockUI({ message: mensagemCarregando, css: cssCarregando }); var a = homePage + "Admin/Concurso/ListarConcursos"; $.ajax({ type: "POST", url: a, success: function (a) { $(".lista").html(""), $(".lista").append(a), montarTabela(), $(".lista").find("table").attr("summary") == naoEncontrado && $(".lista").css("marginTop", 0), $(".editar").on("click", function () { editar($(this).closest("tr").find("td:first span").html()) }), $(".excel").on("click", function () { downloadCSV($(this).closest("tr").find("td:first span").html()) }), $(".recurso").on("click", function () { abrirPagina("Admin/Recurso/Index/" + $(this).closest("tr").find("td:first span").html()) }), $(".inscrito").on("click", function () { abrirPagina("Admin/Concurso/Index_Inscrito/" + $(this).closest("tr").find("td:first span").html()) }), $(".download-remessa").on("click", function () { downloadTXT($(this).closest("tr").find("td:first span").html()) }), $.unblockUI() }, error: function (a) { alertaErroJS({ NomeFuncao: "listarConcursos()", ResponseText: a.responseText }), $.unblockUI() } }) } function listarConcursosUsuario() { $.blockUI({ message: mensagemCarregando, css: cssCarregando }); var a = homePage + "Concurso/ListarConcursos"; $.ajax({ type: "POST", url: a, success: function (a) { $(".abertas").html(""), $(".abertas").append(a), $(".abertas").html(a.Abertas), $(".andamento").html(""), $(".andamento").append(a), $(".andamento").html(a.EmAndamento), $(".encerradas").html(""), $(".encerradas").append(a), $(".encerradas").html(a.Encerradas), $("#abaAbertas").html(textoAbaAbertas + " (" + a.TotalAbertas + ")"), $("#abaAndamento").html(textoAbaAndamento + " (" + a.TotalEmAndamento + ")"), $("#abaEncerradas").html(textoAbaEncerradas + " (" + a.TotalEncerradas + ")"), $(".concurso").on("click", function () { window.location.href = homePage + "Concurso/" + $(this).find("td:first").html() }), $.unblockUI() }, error: function (a) { alertaErroJS({ NomeFuncao: "listarConcursosUsuario()", ResponseText: a.responseText }), $.unblockUI() } }) } function listarDadosConcursosUsuario(a) { $.blockUI({ message: mensagemCarregando, css: cssCarregando }); var o = homePage + "Concurso/ListarDadosConcurso"; $.ajax({ type: "POST", url: o, data: { idConcurso: a }, success: function (a) { $(".publicacoes").html(""), $(".publicacoes").append(a), $(".publicacoes").html(a.Publicacoes), $(".provas_gabaritos").html(""), $(".provas_gabaritos").append(a), $(".provas_gabaritos").html(a.ProvasGabaritos), isMobile || setTabsContentHeight(function () { $(".publicacoes").find(".panelTabs").height($(".cd-tabs-content").height() - 70) }, $(".publicacoes").find(".panelTabs").find("tbody"), 0), $("a.recursos").on("click", function () { $(".cpf-requerente-cargos").html(""), $(".cpf-requerente").show(), $(".recursoForm").hide(), $(".cpf-requerente").find("#txtCPF").val(""), $(".cpf-requerente").find("#txtCPF").focus() }), $.unblockUI() }, error: function (a) { alertaErroJS({ NomeFuncao: "listarDadosConcursosUsuario()", ResponseText: a.responseText }), $.unblockUI() } }) } function maisInscritos(a, o) { $(".listagem").block({ message: mensagemCarregando, css: cssCarregando }), void 0 !== o && o && $("#hdnPagina").val("0"); var e = $("#hdnPagina").val(); e++, $("#hdnPagina").val(e); var t = obterJsonFiltrosInscritos(a), n = homePage + "Admin/Concurso/PesquisarInscritos"; $.ajax({ type: "POST", url: n, data: t, success: function (a) { void 0 !== o && o && $(".scrollTableBody").html(""), a.TotalItens > 0 ? $(".scrollTableBody").append(a.View) : $(".mais").hide(), $(".listagem").unblock() }, error: function (a) { alertaErroJS({ NomeFuncao: "maisInscritos()", ResponseText: a.responseText }), $(".listagem").unblock() } }) } function montarTabela() { $.fn.dataTable.moment("DD/MM/YYYY HH:mm"), oTable = $("#tblConcursos").dataTable({ bLengthChange: !1, order: [[2, "desc"]], aoColumnDefs: [{ bSortable: !1, aTargets: [0, 6, 7, 8, 9] }], language: { url: urlDataTable }, fnDrawCallback: function () { var a = $(".dataTables_filter").offset().left; $(".remessa").offset({ left: a - 50 }), $(".updateConcurso").offset({ left: a - 100 }), $(".adicionarEmpresa").offset({ left: a - 150 }), $(".remessa").show(), $(".updateConcurso").show(), $(".adicionarEmpresa").show() } }), $("#tblConcursos_filter").parent().removeClass("col-sm-6").addClass("col-sm-10"), $("#tblConcursos_filter input").focus() } function montarTabelaInscritos() { oTable = $("#tblInscritos").dataTable({ bLengthChange: !1, order: [[2, "asc"]], aoColumnDefs: [{ bSortable: !1, aTargets: [0, 9] }], language: { url: urlDataTable }, fnDrawCallback: function () { var a = $("#tblInscritos_filter").offset().left; $(".estatisticas").offset({ left: a - 50 }), $(".estatisticas").show(), $("#tblInscritos_filter input").focus() } }) } function obterContentHeight(a, o) { if (void 0 !== o && o) return tamanhoInicialAba - $(".cd-tabs-content").offset().top - a; var e = $(".cd-tabs-content").height(), t = window.innerHeight - $(".cd-tabs-content").offset().top - a; return t > e ? t : e } function obterData(a) { var o = (new Date, a.substring(6, 10)), e = a.substring(3, 5), t = a.substring(0, 2), n = a.substring(11, 13), r = a.substring(14, 16), i = new Date(o, e - 1, t, n, r); return i } function obterJsonFiltrosInscritos(a) { var o = $("#txtMatricula").val(), e = $.trim($("#txtNome").val()), t = removerTodosCaracteresMenosNumeros($("#txtCPF").val()), n = "" == $("#ddlAtivo").val() ? null : $("#ddlAtivo").val(), r = "" == $("#ddlIsento").val() ? null : $("#ddlIsento").val(), i = $(".selecionado").hasClass("nome") ? "N" : "M", s = $("#hdnPagina").val(); return "" == o && (o = 0), { idConcurso: a, pagina: s, ordem: i, matricula: parseInt(o), nome: e, cpf: t, ativo: n, isento: r } } function obterLabelBotaoTipoModal(a) { var o = "Gerar"; switch (a) { case 1: void 0 !== labelGerarBoleto && (o = labelGerarBoleto); break; case 2: void 0 !== labelGerarComprovante && (o = labelGerarComprovante); break; case 3: void 0 !== labelObterClassificacao && (o = labelObterClassificacao); break; case 4: void 0 !== labelGerarStatusPagamento && (o = labelGerarStatusPagamento) } return o } function obterMensagemTipoModal(a) { var o = "Carregando ..."; switch (a) { case 1: void 0 !== mensagemGerandoBoletoBancario && (o = mensagemGerandoBoletoBancario); break; case 2: void 0 !== mensagemGerandoComprovante && (o = mensagemGerandoComprovante); break; case 3: void 0 !== mensagemObtendoClassificacao && (o = mensagemObtendoClassificacao); break; case 4: void 0 !== mensagemGerandoStatusPagamento && (o = mensagemGerandoStatusPagamento) } return o } function obterSufixoTipoModal(a) { switch (a) { case 1: return "boleto"; case 2: return "comprovante"; case 3: return "classificacao"; case 4: return "status-pagamento"; default: return "" } } function pesquisarInscritos(a) { $.blockUI({ message: mensagemCarregando, css: cssCarregando }), $(".matricula").removeClass("selecionado").addClass("order"), $(".nome").addClass("selecionado").removeClass("order"), $("#hdnPagina").val("1"); var o = obterJsonFiltrosInscritos(a), e = homePage + "Admin/Concurso/PesquisarInscritos"; $.ajax({ type: "POST", url: e, data: o, success: function (a) { $(".scrollTable").hide(), $(".emptyTable").hide(), $(".scrollTableBody").html(""), a.TotalItens > 0 ? ($(".scrollTableBody").html(a.View), $(".scrollTable").fadeIn(1e3), $(".mais").show()) : $(".emptyTable").fadeIn(1e3), $.unblockUI() }, error: function (a) { alertaErroJS({ NomeFuncao: "pesquisarInscritos()", ResponseText: a.responseText }), $.unblockUI() } }) } function realizarUploadArquivoRemessa() { $(".modal-remessa").find(".modal-content").block({ message: mensagemProcessandoArquivoRemessa, css: cssCarregando }); var a = homePage + "Admin/Concurso/RealizarUploadArquivoRemessa"; return $.ajax({ type: "POST", url: a, success: function (a) { $("#txtUploadFile").val(""), $(".modal-remessa").find(".modal-content").unblock(), a.Sucesso ? ($(".modal-remessa").find(".upload-file").find(".sucesso").fadeIn(1e3).fadeOut(3e3).promise().done(function () { $(".modal-remessa").modal("hide") }), listarConcursos()) : $(".modal-remessa").find(".upload-file").find(".erro").fadeIn(1e3).fadeOut(3e3) }, error: function (a) { alertaErroJS({ NomeFuncao: "realizarUploadArquivoRemessa()", ResponseText: a.responseText }), $(".modal-remessa").find(".modal-content").unblock() } }), !1 } function realizarUploadArquivoConcurso() { $(".modal-concurso").find(".modal-content").block({ message: mensagemProcessandoArquivoConcurso, css: cssCarregando }); var a = homePage + "Admin/Concurso/RealizarUploadArquivoConcurso"; return $.ajax({ type: "POST", url: a, success: function (a) { $("#txtUploadFile").val(""), $(".modal-concurso").find(".modal-content").unblock(), a.Sucesso ? ($(".modal-concurso").find(".upload-file").find(".sucesso").fadeIn(1e3).fadeOut(3e3).promise().done(function () { $(".modal-concurso").modal("hide") }), listarConcursos()) : $(".modal-concurso").find(".upload-file").find(".erro").fadeIn(1e3).fadeOut(3e3) }, error: function (a) { alertaErroJS({ NomeFuncao: "realizarUploadArquivoConcurso()", ResponseText: a.responseText }), $(".modal-concurso").find(".modal-content").unblock() } }), !1 } function recarregarTabelaAnexos(a, o) { var e = homePage + "Admin/Concurso/RecarregarTabelaAnexo"; $.ajax({ type: "POST", url: e, data: { idConcurso: a, idTipo: o }, success: function (e) { var t = 1 == o ? "#divPublicacoes" : "#divProvasGabaritos"; $(t).html(""), $(t).html(e.View), $(t).find(".editarAnexo").on("click", function (e) { return e.preventDefault(), abrirModalAnexo($(this).closest("tr").find("td:first").html(), a, o), !1 }), $(t).find(".excluirAnexo").on("click", function () { excluirAnexo($(this).closest("tr").find("td:first").html(), a, o) }) }, error: function (a) { alertaErroJS({ NomeFuncao: "recarregarTabelaAnexos()", ResponseText: a.responseText }) } }) } function recarregarTabelaCargos(a) { var o = homePage + "Admin/Concurso/RecarregarTabelaCargo"; $.ajax({ type: "POST", url: o, data: { idConcurso: a }, success: function (o) { var e = "#divCargos"; $(e).html(""), $(e).html(o.View), $("#divCargos").find(".editarCargo").on("click", function () { abrirModalCargo($(this).closest("tr").find("td:first").html(), a) }), $("#divCargos").find(".excluirCargo").on("click", function () { excluirCargo($(this).closest("tr").find("td:first").html(), a) }), $("#divCargos").find(".editarAtivacao").on("click", function () { editarAtivacao($(this).closest("tr").find("td:first").html(), a) }) }, error: function (a) { alertaErroJS({ NomeFuncao: "recarregarTabelaCargos()", ResponseText: a.responseText }) } }) } function salvar()
{
    var a = $("#hdnId").val() <= 0 ? 0 : $("#hdnId").val(), o = $("#ddlTipoLayout option:selected").val(), e = $("#ddlEmpresa").val(), t = $("#txtNome").val(), n = $("#txtDataInicio").val(), r = $("#txtDataEncerramentoInscricoes").val(), i = $("#rdEncSim").is(":checked") ? $("#txtDataEncerramento").val() : "", s = $("#txtDataInicioComprovante").val(), c = $("#txtDataEncerramentoComprovante").val(), l = $("#txtDataInicioClassificacao").val(), d = $("#txtDataInicioIsento").val(), m = $("#txtDataEncerramentoIsento").val(), u = $("#txtDataBoleto").val(), f = $("#rdEncSim").is(":checked"), p = $("#rdIOSim").is(":checked"), g = $("#rdAtivoSim").is(":checked");
    $.blockUI({ message: mensagemSalvando, css: cssCarregando }); var b = homePage + "Admin/Concurso/Salvar"; $.ajax({ type: "POST", url: b, data: { id: a, idTipoLayout: o, emp_idt_empresa: e, nome: t, dataInicio: n, dataEncerramentoInscricoes: r, dataEncerramento: i, dataInicioComprovante: s, dataEncerramentoComprovante: c, dataInicioClassificacao: l, dataInicioIsento: d, dataEncerramentoIsento: m, dataBoleto: u, encerrado: f, inscricaoOnline: p, ativo: g }, success: function (a) { alert(a.Mensagem), a.Sucesso && (window.location.href = homePage + "Admin/Concurso"), $.unblockUI() }, error: function (a) { alertaErroJS({ NomeFuncao: "salvar()", ResponseText: a.responseText }), $.unblockUI() } })
} function tabsContentResize(a, o) { var e = $("#modal-boleto").find(".modal").is(":visible"); isMobile || e || setTimeout(function () { $(".cd-tabs-content").height(obterContentHeight(a, o)) }, 500) } function uploadFileAnexos(a, o) { $.blockUI({ message: mensagemRealizandoUpload, css: cssCarregando }); var e = a.target.files; if (e.length > 0 && void 0 !== window.FormData) { for (var t = new FormData, n = 0; n < e.length; n++) t.append("file" + n, e[n]); $.ajax({ type: "POST", url: homePage + "Concurso/UploadAnexosConcurso?idConcurso=" + o, contentType: !1, processData: !1, data: t, success: function (a) { a.Sucesso ? $(".sucesso").fadeIn(1e3).fadeOut(3e3) : $(".erro").fadeIn(1e3).fadeOut(3e3), $.unblockUI() }, error: function (a) { alertaErroJS({ NomeFuncao: "uploadFileAnexos()", ResponseText: a.responseText }), $.unblockUI() } }) } } function uploadFileAnexoRecurso(a) { var o = a.target.files; if (o.length > 0 && void 0 !== window.FormData) { for (var e = new FormData, t = 0; t < o.length; t++) e.append("file" + t, o[t]); $.ajax({ type: "POST", url: homePage + "Concurso/UploadAnexoRecurso", contentType: !1, processData: !1, data: e, success: function () { }, error: function (a) { alertaErroJS({ NomeFuncao: "enviarRecurso-Anexo()", ResponseText: a.responseText }), $.unblockUI() } }) } } function uploadFileRemessa(a) { var o = a.target.files; if (o.length > 0 && void 0 !== window.FormData) { for (var e = new FormData, t = 0; t < o.length; t++) e.append("file" + t, o[t]); $.ajax({ type: "POST", url: homePage + "Admin/Concurso/UploadAnexoRemessa", contentType: !1, processData: !1, data: e, success: function () { }, error: function (a) { alertaErroJS({ NomeFuncao: "uploadFileRemessa()", ResponseText: a.responseText }), $.unblockUI() } }) } } function uploadFileConcurso(a) { var o = a.target.files; if (o.length > 0 && void 0 !== window.FormData) { for (var e = new FormData, t = 0; t < o.length; t++) e.append("file" + t, o[t]); $.ajax({ type: "POST", url: homePage + "Admin/Concurso/UploadAnexoConcurso", contentType: !1, processData: !1, data: e, success: function () { }, error: function (a) { alertaErroJS({ NomeFuncao: "uploadFileConcurso()", ResponseText: a.responseText }), $.unblockUI() } }) } } var oTable, tamanhoInicialAba, isMobile = $(window).width() < 800;